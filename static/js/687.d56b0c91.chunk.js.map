{"version":3,"file":"static/js/687.d56b0c91.chunk.js","mappings":"8QACA,GAAgB,YAAc,0BAA0B,KAAO,mBAAmB,MAAQ,oBAAoB,OAAS,sB,SCMjHA,GAAWC,EAAAA,EAAAA,OAAK,kBAAM,gCAEtBC,EAAK,IAAIC,EAAAA,EAEA,SAASC,IACtB,OAA0BC,EAAAA,EAAAA,UAAS,IAAnC,eAAOC,EAAP,KAAcC,EAAd,KACA,GAA8BF,EAAAA,EAAAA,WAAS,GAAvC,eAAOG,EAAP,KAAgBC,EAAhB,KACA,GAA0BJ,EAAAA,EAAAA,UAAS,IAAnC,eAAOK,EAAP,KAAcC,EAAd,KACMC,GAAWC,EAAAA,EAAAA,MACXC,GAAUC,EAAAA,EAAAA,IAAqB,CAAEC,OAAAA,SACvC,GAAiBC,EAAAA,EAAAA,MAAVC,GAAP,eAN6B,SAQdC,EARc,0EAQ7B,WAAyBC,GAAzB,uFACoBlB,EAAGmB,SAASD,GADhC,OACQE,EADR,OAEEX,EAASW,EAAIC,KAAKC,SAClBf,GAAW,GAHb,4CAR6B,sBA+B7B,OAPAgB,EAAAA,EAAAA,YAAU,WACR,IAAML,EAAQF,EAAOQ,IAAI,SACrBN,GACFD,EAAUC,KAEX,CAACF,KAGF,iBAAKS,UAAWC,EAAAA,YAAhB,WACE,iBAAMC,SAnBV,SAAsBC,GACpBA,EAAGC,iBACHZ,EAAUb,GACVQ,EAAQkB,KAAK,CACXC,SAAUrB,EAASqB,SACnBC,OAAO,UAAD,OAAY5B,KAEpBC,EAAS,KAYuBoB,UAAWC,EAAAA,KAAzC,UACE,mBAAOD,UAAWC,EAAAA,MAAlB,WACE,kBACED,UAAWC,EAAAA,MACXO,KAAK,OACLC,MAAO9B,EACP+B,SAAU,SAAAP,GAAE,OAAIvB,EAASuB,EAAGQ,cAAcF,WAE5C,mBAAQT,UAAWC,EAAAA,OAAUO,KAAK,SAAlC,0BAKJ,SAAC,EAAAI,SAAD,CAAUC,UAAU,sCAApB,SACGhC,IAAW,SAACR,EAAD,CAAUU,MAAOA","sources":["webpack://react-homework-template/./src/components/Form/Form.module.css?89ba","components/Form/Form.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"formWrapper\":\"Form_formWrapper__IATQt\",\"form\":\"Form_form__e1yzW\",\"label\":\"Form_label__8nx+5\",\"button\":\"Form_button__8NOIT\"};","// import HomePage from 'components/HomePage';\nimport { createBrowserHistory } from 'history';\nimport { lazy, Suspense, useEffect, useState } from 'react';\nimport { useLocation, useSearchParams } from 'react-router-dom';\nimport Api from 'Services/Api';\nimport s from './Form.module.css';\n\nconst HomePage = lazy(() => import('../HomePage'));\n\nconst Ap = new Api();\n\nexport default function Form() {\n  const [input, setInput] = useState('');\n  const [isFound, setIsFound] = useState(false);\n  const [films, setFilms] = useState([]);\n  const location = useLocation();\n  const history = createBrowserHistory({ window });\n  const [params] = useSearchParams();\n\n  async function getMovies(query) {\n    const arr = await Ap.getMovie(query);\n    setFilms(arr.data.results);\n    setIsFound(true);\n  }\n\n  function onFormSubmit(ev) {\n    ev.preventDefault();\n    getMovies(input);\n    history.push({\n      pathname: location.pathname,\n      search: `?query=${input}`,\n    });\n    setInput('');\n  }\n\n  useEffect(() => {\n    const query = params.get('query');\n    if (query) {\n      getMovies(query);\n    }\n  }, [params]);\n\n  return (\n    <div className={s.formWrapper}>\n      <form onSubmit={onFormSubmit} className={s.form}>\n        <label className={s.label}>\n          <input\n            className={s.input}\n            type=\"text\"\n            value={input}\n            onChange={ev => setInput(ev.currentTarget.value)}\n          />\n          <button className={s.button} type=\"button\">\n            Search\n          </button>\n        </label>\n      </form>\n      <Suspense fallback={<p>Loading...</p>}>\n        {isFound && <HomePage films={films} />}\n      </Suspense>\n    </div>\n  );\n}\n"],"names":["HomePage","lazy","Ap","Api","Form","useState","input","setInput","isFound","setIsFound","films","setFilms","location","useLocation","history","createBrowserHistory","window","useSearchParams","params","getMovies","query","getMovie","arr","data","results","useEffect","get","className","s","onSubmit","ev","preventDefault","push","pathname","search","type","value","onChange","currentTarget","Suspense","fallback"],"sourceRoot":""}